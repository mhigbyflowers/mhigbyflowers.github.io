<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>

    <meta name="google-site-verification" content="DHNpaieHLRmWXaoeKyVS0UuJdj3WiYps1ADOQ2_DzsY" />
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-142708787-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());

        gtag('config', 'UA-142708787-1');
    </script>

    <style>
        body {
            margin: 0;
            overflow-y: scroll;
            overflow-x: hidden;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }

        .container {
            width: 100%;
            background: white;
            padding-right: 2rem;
        }


        canvas {
            position: fixed;
            z-index: -1;
            height: 105vh;
            width: 105vw;
            opacity: 1;
            cursor: none;
        }


        .info {
            cursor: default;
            background: rgba(255, 255, 255, 1);
            width: 95%;
            padding: 2rem;
            margin: auto;


        }

        .set {
            margin-top: 1rem;
            margin-bottom: .2rem;
        }

        .text-left {
            /* margin-left: -1rem; */
            margin-bottom: 0;
        }
    </style>
</head>


<body>
    <canvas></canvas>
    <div class="container">
        <section class="info">
            <h1 class="text-left">Morgan Higby-Flowers</h1>
            <h3>New Media Artist</h3>
            <!-- <div class="info-body">
                <div>Employment:</div>
                <div> <strong>Sr Application Developer</strong> @ VUMC </div>
                <div>Education:</div>
                <div><strong> MFA </strong> | <strong>Electronic Integrated Arts</strong> Alfred University</div>
                <div><strong> BFA </strong> | <strong>Film Video & New Media</strong> School of the Art Institute of
                    Chicago </div>
                <div>Lives:</div>
                <div><strong> Nashville, TN </strong></div>
            </div> -->


            <!-- <p class='set'><strong>Some websites I develop:</strong></p>
            <a href="http://databrowser.researchallofus.org">Data Browser</a> |
            <a href="http://virginiagriswold.com/">Virginia Griswold Artist</a> |
            <a href="http://phekb.org/"> The Phenotype KnowledgeBase</a> |
            <a href="https://pogoe.org/">The Portal of Geriatrics Online Education</a> -->
            <p class='set'><strong>Some of my artwork:</strong></p>
            <a href="https://vimeo.com/159279775">P r o x m i t y</a> |
            <a href="https://vimeo.com/134217703">Syncope</a> |
            <a href="https://vimeo.com/98595512">kvika</a> |
            <a href="https://vimeo.com/121733157">LANscrub</a> |
            <a href="https://youtu.be/TW0AgmBxb24">notha</a> |
            <a href="https://youtu.be/mHdAYKGNajQ">Input == Input ( loud )</a> |
            <a href="https://youtu.be/uxhFiuF2Gv0">Dish Drone ( collaboration with Virginia Griswold )</a> |
            <a href="https://youtu.be/fjNP2lQWuWc">wonder wander</a> |
            <a href="https://vimeo.com/136279974">SystemPolitics</a>
        </section>
    </div>



</body>
<script>
    var canvas = document.querySelector("canvas");
    var context = canvas.getContext("2d");
    var cachedTexture = canvas;
    var animating = true;
    var width, height, radius, centerX, centerY;
    var raf = window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        window.oRequestAnimationFrame;
    var theta = 20;
    var direction = 0;
    var time = performance.now() / 10;
    var translateX;
    var translateY;
    var translate0 = -.5;
    var translate1 = 1;
    var rotate0 = .10;
    var rotate1 = 0;
    var scale0 = 1;
    var scale1 = .01;
    var sizeX = 100;
    var sizeY = 100;
    var now = new Date();
    var sec = now.getSeconds();
    const compositeList = [
        'source-over',
        'source-atop',
        'source-in',
        'source-out',
        'destination-over',
        'destination-atop',
        'destination-in',
        'destination-out',
        'lighter',
        'copy',
        'xor'
    ]
    let compositeCollection = randomComposite();
    const copyContent = async () => {
        try {
            await navigator.clipboard.writeText(compositeCollection.toString());
            console.log('Content copied to clipboard');
        } catch (err) {
            console.error('Failed to copy: ', err);
        }
    }

    resize();
    tick();


    window.addEventListener("resize", resize, false);
    document.addEventListener("mousedown", mouseDown, false);
    document.addEventListener("keydown", keyDown, false);

    function renderToCache(renderFunction) {
        var buffer = document.createElement('canvas');
        buffer.width = width;
        buffer.height = height;
        renderFunction(buffer.getContext('2d'));
        return buffer;
    };

    document.addEventListener('mousemove', function (ev) {
        translateX = ev.clientX;
        translateY = ev.clientY;
    });

    function randomComposite() {
        randomComposite = compositeList[Math.floor(Math.random() * compositeList.length)];
        payload = [randomComposite, randomComposite, randomComposite];
        console.log(payload);
        return payload;
    }

    function drawScene() {

        cachedTexture = renderToCache(function (ctx) {
            var img = new Image();

            // ctx.translate(centerX - width / 2, centerY - height / 2);
            // ctx.scale(.9999, .999);
            ctx.setTransform(1, 0.000, 0.000, 1.009, 0, 0);
            ctx.drawImage(cachedTexture, 0, 0, width, height);
            ctx.globalCompositeOperation = compositeCollection[1]
            ctx.setTransform(1, 0.000, 0.000, .998, 0, 0);
            ctx.drawImage(cachedTexture, 0, 0, width, height);
            // ctx.setTransform(1, 0.000, 0.000, 1, 0, 0)



            img.src = 'bird.png';
            var imgWidth = parseInt(img.naturalWidth);
            var imgHeight = parseInt(img.naturalHeight);
            ctx.globalCompositeOperation = compositeCollection[0];
            // ctx.globalCompositeOperation = "xor";
            ctx.drawImage(img, translateX - imgWidth / 2, translateY - imgHeight / 2, 600, 600);
            // ctx.drawImage(img, numX ^ imgHeight / 2, numY ^ height / 2);

        });
        // context.fillRect(0, 0, width, height);
        context.globalCompositeOperation = compositeCollection[2];
        context.drawImage(cachedTexture, 0, 0, );


    }




    function tick() {

        var now = performance.now() / 100;
        if (animating) {
            setTimeout(() => raf(tick), 60);
            theta = (now / time) / direction;
            time = now;
            drawScene();
        } else raf(tick);
    }

    function resize(e) {

        width = window.innerWidth;
        height = window.innerHeight;
        centerX = (width / 2);
        centerY = height / 2;

        canvas.width = width;
        canvas.height = height;

        if (!animating) drawScene();
    }

    function keyDown(e) {
        if (e.key == 'a') {
            compositeCollection = ['destination-atop', 'source-out', 'destination-atop'];
        } else if (e.key == 's') {
            compositeCollection = ['source-over', 'source-atop', 'destination-atop'];
        } else if (e.key == 'd') {
            compositeCollection = ['source-atop', 'destination-atop', compositeList[Math.floor(Math.random() * compositeList.length)]];
        } else if (e.key == 'f') {
            compositeCollection = ['source-over','source-atop','destination-atop'];
        } 
        else {
            for (let i = 0; i < 3; i++) {
                compositeCollection.pop();
                // compositeCollection.push(compositeList[Math.floor(Math.random() * compositeList.length)]);
            }
            for (let i = 0; i < 3; i++) {
                // compositeCollection.pop();
                compositeCollection.push(compositeList[Math.floor(Math.random() * compositeList.length)]);
            }
        }
        copyContent();
        console.log(compositeCollection);
    }


    function mouseDown(e) {

        // compositeCollection = [
        //     "lighter",
        //     "source-atop",
        //     "source-over"
        // ]
        // console.log(compositeCollection);
        // click to pasue
        // e.stopPropagation();
        // e.preventDefault();
        // animating = !animating;
        if (animating) {
            direction *= -1;
            time = performance.now() / 100;
            tick();
        }
    }
</script>

</html>